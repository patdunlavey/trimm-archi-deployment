{"data":{"id":"bde1cb38-e1b8-4f2d-bc1c-bff646d2e8b7","type":"metadatadisplay_entity--metadatadisplay_entity","attributes":{"twig":"{#- \r\nUpdated 31\/10\/2023 for 1.3.0 \r\n- switched to Macro approach; added Nav-tabs for main description display and downloads menu. \r\n- MACROS: \r\n  - uses two macros originally created by Diego, \r\n  - uses two macros orginally created by Allison for internal-search referenced elements \r\n- File downloads nav-tab \r\n-#} \r\n{#- ------ Macros Start ----- -#} \r\n{%- macro html_output(html_title, source_datum, list_wrapper = \"p\", markdown = false) -%} \r\n  {# -- Macro note: if markdown is selected no wrapper will be used -#} \r\n  {%- if source_datum and source_datum|length > 0 -%} \r\n<div class=\"field__row\">\r\n    {%- if html_title|length > 0 -%} \r\n  <div class=\"field__label\">{{ html_title }}<\/div>\r\n    {%- endif -%} \r\n  <div class=\"field__item\">\r\n  {%- if source_datum is iterable -%} \r\n      {%- for source_data in source_datum -%} \r\n        {%- if markdown -%} \r\n\t\t  {{ source_data|markdown_2_html }} \r\n        {%- else -%} \r\n          <{{list_wrapper}}>{{ source_data }}<\/{{list_wrapper}}> \r\n        {%- endif -%} \r\n      {%- endfor -%} \r\n\t{%- else -%} \r\n      {%- if markdown -%} \r\n          {{ source_datum|markdown_2_html }} \r\n      {%- else -%} \r\n\t\t  <{{list_wrapper}}>{{ source_datum }}<\/{{list_wrapper}}> \r\n      {%- endif -%} \r\n    {%- endif -%} \r\n    <\/div>\r\n<\/div>\r\n  {%- endif -%} \r\n{%- endmacro html_output -%} \r\n{%- macro html_output_list(html_title, source_datum, markdown = false) -%} \r\n  {# -- Macro note: if markdown is selected no wrapper will be used -#} \r\n  {%- if source_datum and source_datum|length > 0 -%} \r\n<div class=\"field__row\">\r\n    {%- if html_title|length > 0 -%} \r\n  <div class=\"field__label\">{{ html_title }}<\/div>\r\n    {%- endif -%} \r\n  <div class=\"field__item\">\r\n    <ul> \r\n\t{%- if source_datum is iterable -%} \r\n\t  {%- for source_data in source_datum -%} \r\n        {%- if markdown -%} \r\n\t      <li>{{ source_data|markdown_2_html }}<\/li> \r\n        {%- else -%} \r\n          <li>{{ source_data }}<\/li> \r\n        {%- endif -%} \r\n\t  {%- endfor -%} \r\n\t{%- else -%} \r\n      {%- if markdown -%} \r\n        <li>{{ source_datum|markdown_2_html }}<\/li> \r\n      {%- else -%} \r\n\t\t<li>{{ source_datum }}<\/li> \r\n      {%- endif -%} \r\n    {%- endif -%} \r\n    <\/ul> \r\n  <\/div>\r\n<\/div>\r\n  {%- endif -%} \r\n{%- endmacro html_output_list -%} \r\n{# Allison: internal search macros based off Diego's list output macro above; \r\nadded flag and formatting for internal search-based on value set within corresponding facet config; \r\none macro for simple non-LoD elements; second for LoD elements with URI and label values #} \r\n{%- macro html_output_search(html_title, source_datum, search_facet) -%} \r\n  {%- if source_datum and source_datum|length > 0 -%} \r\n<div class=\"field__row\">\r\n    {%- if html_title|length > 0 -%} \r\n  <div class=\"field__label\">{{ html_title }}<\/div>\r\n    {%- endif -%} \r\n  <div class=\"field__item\">\r\n    <ul> \r\n\t{%- if source_datum is iterable -%} \r\n\t  {%- for source_data in source_datum -%} \r\n\t  <li><a href=\"\/search?search_api_fulltext=&f%5B0%5D={{search_facet}}%3A{{ source_data|url_encode }}\" target=\"_blank\" >{{ source_data }}<\/a><\/li> \r\n\t  {%- endfor -%} \r\n\t  {%- else -%} \r\n\t  <li><a href=\"\/search?search_api_fulltext=&f%5B0%5D={{search_facet}}%3A{{ source_datum|url_encode }}\" target=\"_blank\" >{{ source_datum }}<\/a><\/li> \r\n\t  {%- endif -%} \r\n    <\/ul> \r\n  <\/div>\r\n<\/div>\r\n  {%- endif -%} \r\n{%- endmacro html_output_search -%} \r\n{# Use for LoD elements with URI and label values#} \r\n{%- macro html_output_search_lod(html_title, source_datum, search_facet) -%} \r\n  {%- if source_datum and source_datum|length > 0 -%} \r\n<div class=\"field__row\">\r\n    {%- if html_title|length > 0 -%} \r\n  <div class=\"field__label\">{{ html_title }}<\/div>\r\n    {%- endif -%} \r\n  <div class=\"field__item\">\r\n    <ul> \r\n\t  {%- for source_data in source_datum -%} \r\n\t  <li><a href=\"\/search?search_api_fulltext=&f%5B0%5D={{search_facet}}%3A{{ source_data.label|url_encode }}\" target=\"_blank\" >{{ source_data.label }}<\/a><\/li> \r\n\t  {%- endfor -%} \r\n    <\/ul> \r\n  <\/div>\r\n<\/div>\r\n  {%- endif -%} \r\n{%- endmacro html_output_search_lod -%} \r\n{#- --- End Macros ---- -#} \r\n{# -- Embargo option -- #} \r\n{% set file_download_restricted = false %} \r\n{% if data_embargo.embargoed == true %} \r\n   {# also restrict if embargoed #} \r\n   {% set file_download_restricted = true %} \r\n{% endif %} \r\n{# -- File Downloads Section -- #} \r\n  {% set download_label = \"Download\" %} \r\n  {% set download_metadata_label = \"Metadata\" %} \r\n  {% set download_file_label = \"Files\" %} \r\n  {% set download_file_video = \"Videos\" %} \r\n  {% set download_file_audio = \"Audios\" %} \r\n  {% set download_file_img = \"Images\" %} \r\n  {% set download_file_doc = \"Documents\" %} \r\n  {% set download_file_text = \"Texts and transcripts\" %} \r\n{# Downloads as a set variable #} \r\n  {% set downloadlist %} \r\n{# May 2023, new downloads #} \r\n    <li><a download class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/metadata\/mods\/mods.xml\">MODS 3.7<\/a><\/li> \r\n    <li><a download class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/metadata\/dc\/dc.xml\">Dublin Core<\/a><\/li> \r\n    <li><a download class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/metadata\/geojson\/geojson.json\">GeoJSON<\/a><\/li> \r\n  {% if not file_download_restricted %} \r\n    {% if data.type not in ['Collection','CreativeWorkSeries'] %} \r\n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/metadata\/iiifmanifest\/default.jsonld\">IIIF Presentation Manifest 3.0<\/a><\/li> \r\n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/metadata\/iiifmanifestv2\/default.jsonld\">IIIF Presentation Manifest 2.1<\/a><\/li> \r\n    {% elseif data.type == 'CreativeWorkSeries' %} \r\n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/metadata\/iiifmanifest3cws\/default.jsonld\">IIIF Presentation Manifest 3.0<\/a><\/li> \r\n    {% else %} \r\n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/metadata\/iiifmanifest3collection\/default.jsonld\">IIIF Presentation Manifest 3.0<\/a><\/li> \r\n    {% endif %} \r\n    {% if attribute(data, 'as:document')|length < 10 and attribute(data, 'as:document')|length > 0 %} \r\n\t   <li><hr class=\"dropdown-divider\"><\/li> \r\n       <li><h2 class=\"dropdown-header\">{{ download_file_doc }}<\/h2><\/li> \r\n      {% for singledocument in attribute(data, 'as:document') %} \r\n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/file\/{{ singledocument['dr:uuid'] }}\/download\/{{ singledocument.name }}\" target=\"_blank\">{{ singledocument.name }}<\/a><\/li> \r\n\t  {% endfor %} \r\n    {% endif %} \r\n    {% if attribute(data, 'as:text')|length < 10 and attribute(data, 'as:text')|length > 0 %} \r\n\t   <li><hr class=\"dropdown-divider\"><\/li> \r\n       <li><h2 class=\"dropdown-header\">{{ download_file_text }}<\/h2><\/li> \r\n      {% for singletext in attribute(data, 'as:text') %} \r\n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/file\/{{ singletext['dr:uuid'] }}\/download\/{{ singletext.name }}\" target=\"_blank\">{{ singletext.name }}<\/a><\/li> \r\n\t  {% endfor %} \r\n    {% endif %} \r\n    {% if attribute(data, 'as:image')|length <= 10 and attribute(data, 'as:image')|length > 0 %} \r\n\t   <li><hr class=\"dropdown-divider\"><\/li> \r\n       <li><h2 class=\"dropdown-header\">{{ download_file_img }}<\/h2><\/li> \r\n      {% for singleimage in attribute(data, 'as:image') %} \r\n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/file\/{{ singleimage['dr:uuid'] }}\/download\/{{  singleimage.name }}\" target=\"_blank\">{{ singleimage.name }}<\/a><\/li> \r\n\t  {% endfor %} \r\n    {% endif %} \r\n    {% if attribute(data, 'as:video')|length <= 10 and attribute(data, 'as:video')|length > 0 %} \r\n\t   <li><hr class=\"dropdown-divider\"><\/li> \r\n       <li><h2 class=\"dropdown-header\">{{ download_file_video }}<\/h2><\/li> \r\n      {% for singlevideo in attribute(data, 'as:video') %} \r\n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/file\/{{ singlevideo['dr:uuid'] }}\/download\/{{ singlevideo.name }}\" target=\"_blank\">{{ singlevideo.name }}<\/a><\/li> \r\n\t  {% endfor %} \r\n    {% endif %} \r\n    {% if attribute(data, 'as:audio')|length <= 10 and attribute(data, 'as:audio')|length > 0 %} \r\n\t   <li><hr class=\"dropdown-divider\"><\/li> \r\n       <li><h2 class=\"dropdown-header\">{{ download_file_audio }}<\/h2><\/li> \r\n      {% for singleaudio in attribute(data, 'as:audio') %} \r\n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"\/do\/{{ node.uuid.value }}\/file\/{{ singleaudio['dr:uuid'] }}\/download\/{{ singleaudio.name }}\" target=\"_blank\">{{ singleaudio.name }}<\/a><\/li> \r\n\t  {% endfor %} \r\n    {% endif %} \r\n  {% endif %} \r\n  {% endset %} \r\n{# -- Main Object Description Display Template : Primary Nav-tab -- #} \r\n<nav> \r\n  <ul class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\"> \r\n  <li class=\"nav-item\"> \r\n    <button class=\"nav-link active\" id=\"nav-en-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#nav-en\" type=\"button\" role=\"tab\" aria-controls=\"nav-en\" aria-selected=\"false\">Description<\/button> \r\n  <\/li> \r\n\r\n{# evaluate download restriction here #} \r\n  <li class=\"nav-item dropdown\"> \r\n    <a class=\"nav-link dropdown-toggle\" data-bs-toggle=\"dropdown\" href=\"#\" role=\"button\" aria-expanded=\"false\">{{ download_label }}<\/a> \r\n    <ul class=\"dropdown-menu\"> \r\n      <li><h2 class=\"dropdown-header\">{{ download_metadata_label }}<\/h2><\/li> \r\n      <li><hr class=\"dropdown-divider\"><\/li> \r\n      {{ downloadlist }} \r\n    <\/ul> \r\n  <\/li> \r\n{# End evaluate download restriction here #} \r\n<\/ul> \r\n<\/nav> \r\n<div class=\"tab-pane fade show active\" id=\"nav-en\" role=\"tabpanel\" aria-labelledby=\"nav-en-tab\"> \r\n{# Collection, Part of membership section #} \r\n{% if attribute(data, 'ismemberof') %} \r\n<div class=\"field__row\">\r\n  <div class=\"field__label\">Part of Collection<\/div>\r\n  <div class=\"field__item\">\r\n{% if attribute(data, 'ismemberof') is iterable %} \r\n\t{% for collection in attribute(data, 'ismemberof')%} \r\n\t\t{% set parentnode = bamboo_load_entity('node', collection) %} \r\n        {% if parentnode %} \r\n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': collection}, {'absolute': true}) %} \r\n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}<\/a> \r\n        {% endif %} \r\n\t{% endfor %} \r\n\t{% else %} \r\n\t\t{% set parentnode = bamboo_load_entity('node', attribute(data, 'ismemberof')) %} \r\n        {% if parentnode %} \r\n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': attribute(data, 'ismemberof')}, {'absolute': true}) %} \r\n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}<\/a> \r\n        {% endif %} \r\n{% endif %} \r\n  <\/div>\r\n<\/div>\r\n{% endif %} \r\n{% if attribute(data, 'ispartof') %} \r\n<div class=\"field__row\">\r\n  <div class=\"field__label\">Part Of<\/div>\r\n  <div class=\"field__item\">\r\n{% if attribute(data, 'ispartof') is iterable %} \r\n\t{% for child in attribute(data, 'ispartof')%} \r\n\t\t{% set parentnode = bamboo_load_entity('node', child) %} \r\n        {% if parentnode %} \r\n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': child}, {'absolute': true}) %} \r\n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}<\/a> \r\n        {% endif %} \r\n\t{% endfor %} \r\n\t{% else %} \r\n\t\t{% set parentnode = bamboo_load_entity('node', attribute(data, 'ispartof')) %} \r\n        {% if parentnode %} \r\n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': attribute(data, 'ispartof')}, {'absolute': true}) %} \r\n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}<\/a> \r\n        {% endif %} \r\n{% endif %} \r\n  <\/div>\r\n<\/div>\r\n{% endif %} \r\n{# End of Collection, Part of membership section #} \r\n{{ _self.html_output(\"Title\", data.label) }} \r\n{{ _self.html_output('Media', data.medium, 'p') }} \r\n{{ _self.html_output('Description', data.description, '', true) }} \r\n{{ _self.html_output('Size', data.size, 'p') }} \r\n{% set all_date_created = [] %} \r\n{% if ((data.date_created_free is defined and not empty) and (data.date_created_free is not iterable and data.date_created_free|trim|length > 0))  %} \r\n    {% set all_date_created = all_date_created|merge([data.date_created_free]) %} \r\n{% elseif data.date_created_edtf.date_free|length > 0  %} \r\n  {% set all_date_created = all_date_created|merge([data.date_created_edtf.date_free|trim|edtf_2_human_date('en')]) %} \r\n{% endif %} \r\n{% if all_date_created|length > 0 %} \r\n<div class=\"field__row\">\r\n  <div class=\"field__label\">Created<\/div>\r\n  <div class=\"field__item\">\r\n  {% for date_created in all_date_created  %} \r\n    <p>{{ date_created }}<\/p> \r\n  {% endfor %} \r\n  <\/div>\r\n<\/div>\r\n{% endif %} \r\n{# End of Date Created Advanced Example #} \r\n{% if data.creator|length > 0 %} \r\n<div class=\"field__row\">\r\n  <div class=\"field__label\">Creator{% if data.creator|length > 1 %}s{% endif %}<\/div>\r\n  <div class=\"field__item\">\r\n    <ul> \r\n\t\t{% for creator in data.creator %} \r\n  \t<li class=\"nav-item\" style=\"padding:3px;margin-top:4px;\"><a href=\"\/search?search_api_fulltext=&sort_by=changed&sort_order=DESC&items_per_page=25&f%5B0%5D=descriptive_metadata_agent_labels%3A{{ creator.name_label|url_encode }}\" target=\"_blank\" >{{ creator.name_label }}<\/a> \r\n    {% if creator.name_uri|length > 2 %} \r\n    \t<span class=\"badge badge-primary badge-pill\"><a class=\"nav-link active\" href=\"{{ creator.name_uri }}\" target=\"_blank\" ><i class=\"fas fa-link fa-1x\"><\/i><\/a><\/span> \r\n        {% endif %} \r\n    <\/li> \r\n\t{% endfor %} \r\n\t<\/ul> \r\n  <\/div>\r\n<\/div> \r\n{% endif %} \r\n{{ _self.html_output('Type', data.type, 'p') }} \r\n{{ _self.html_output_list('Publisher', data.publisher) }} \r\n{{ _self.html_output('Rights', data.rights, '', true) }} \r\n{{ _self.html_output('Owning institution', data.nowner, 'p') }} \r\n{{ _self.html_output('Physical Description Extent', data.physical_description_extent, 'p') }} \r\n{{ _self.html_output('Related Item', data.related_item_host_title_info_title, 'p') }} \r\n{{ _self.html_output_search(\"Local Subjects\", data.subjects_local, \"descriptive_metadata_subjects\") }} \r\n{{ _self.html_output_search(\"Local Personal Names\", data.subjects_local_personal_names, \"descriptive_metadata_subjects\") }} \r\n{# Still part of nav-tab for Additional Information #} \r\n{% if logged_in %} \r\n<h3>Administrative Information<\/h3> \r\n<p><i>This information is only being display for Logged In Users.<\/i><\/p> \r\n{{ _self.html_output('Photo ID', data.photo_id, 'p') }} \r\n{{ _self.html_output('Note', data.note, 'p') }} \r\n{{ _self.html_output('Local Identifier', data.local_identifier, 'p') }} \r\n{% endif %} \r\n<\/div>{# Closes Main Content Nav-tab #}","mimetype":"text\/html","langcode":"und","name":"Object Description"}}}